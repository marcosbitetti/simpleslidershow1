// Generated by CoffeeScript 1.4.0
(function() {
  var CardWidget, name, slides_seta_data,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  CardWidget = (function() {

    function CardWidget(name, IMAGES, IMAGES_PATH) {
      var ava, ret, url, _fn, _i, _len,
        _this = this;
      this.IMAGES = IMAGES;
      this.render = __bind(this.render, this);

      this.update = __bind(this.update, this);

      this.delay = __bind(this.delay, this);

      this.swap = __bind(this.swap, this);

      this.timmer = __bind(this.timmer, this);

      this.imageLoaded = __bind(this.imageLoaded, this);

      this.canvas = document.getElementById(name + '_canvas');
      this.canvas.width = this.canvas.parentNode.parentNode.offsetWidth;
      this.canvas.height = this.canvas.parentNode.parentNode.offsetHeight;
      this.imagens = [];
      this.links = [];
      this.loaded = 0;
      this.fps = 1000 / 30;
      this.delayTime = 7;
      this.curImage = null;
      this.curAlpha = 1;
      this.curDelay = 0;
      this.transition = 0;
      this.alternateTransitions = false;
      try {
        if (slides_trans !== void 0) {
          if (slides_trans === "alternate") {
            this.transition = 0;
            this.alternateTransitions = true;
          } else {
            this.transition = slides_trans;
            if (this.transition > 5) {
              this.transition = 0;
            }
          }
        }
      } catch (err) {

      }
      try {
        if (slides_time !== void 0) {
          this.delayTime = parseInt(slides_time) || 7;
        }
      } catch (err) {

      }
      _fn = function(url) {
        var img, link;
        link = null;
        if (typeof url === 'object') {
          try {
            link = url[1];
            url = url[0];
          } catch (err) {
            link = url.link;
            url = url.image;
          }
        }
        img = new Image();
        img.onload = _this.imageLoaded;
        img.onerror = function(e) {};
        img.src = IMAGES_PATH + url;
        _this.imagens.push(img);
        return _this.links.push(link);
      };
      for (_i = 0, _len = IMAGES.length; _i < _len; _i++) {
        url = IMAGES[_i];
        _fn(url);
      }
      ret = document.getElementById("wslider_seta_r_" + name);
      ava = document.getElementById("wslider_seta_a_" + name);
      this.addEvent(ret, 'click', function(e) {
        _this.curImage -= 1;
        if (_this.curImage < 0) {
          _this.curImage = _this.imagens.length - 1;
        }
        return _this.swap(_this.curImage);
      });
      this.addEvent(ava, 'click', function(e) {
        _this.curImage += 1;
        if (_this.curImage >= _this.imagens.length) {
          _this.curImage = 0;
        }
        return _this.swap(_this.curImage);
      });
      this.addEvent(this.canvas, 'click', function(e) {
        var link;
        link = _this.links[_this.curImage];
        if (link !== null) {
          return window.document.location.href = link;
        }
      });
    }

    CardWidget.prototype.imageLoaded = function(e) {
      this.loaded += 1;
      if (this.loaded >= this.IMAGES.length) {
        this.curImage = this.IMAGES.length;
        this.swap();
        this.timmer();
      }
      return this.render(e.target);
    };

    CardWidget.prototype.timmer = function() {
      if (this.dirty) {
        this.update();
      } else {
        this.delay();
      }
      return window.setTimeout(this.timmer, this.fps);
    };

    CardWidget.prototype.swap = function(v) {
      if (v === void 0) {
        this.curImage += 1;
      }
      if (this.curImage >= this.IMAGES.length) {
        this.curImage = 0;
      }
      this.curAlpha = 0;
      this.curDelay = 0;
      this.dirty = true;
      if (this.links[this.curImage] !== null) {
        this.canvas.style.cursor = "pointer";
        return this.canvas.title = this.links[this.curImage];
      } else {
        this.canvas.style.cursor = "default";
        return this.canvas.title = "";
      }
    };

    CardWidget.prototype.delay = function() {
      this.curDelay += 1;
      if (this.curDelay > (30 * this.delayTime)) {
        return this.swap();
      }
    };

    CardWidget.prototype.update = function() {
      this.curAlpha += (1 - this.curAlpha) * .05;
      if (Math.round(this.curAlpha * 1000) >= 1000) {
        this.curAlpha = 1;
        this.dirty = false;
        if (this.alternateTransitions) {
          this.transition += 1;
          if (this.transition > 5) {
            this.transition = 0;
          }
        }
      }
      return this.render(this.imagens[this.curImage]);
    };

    CardWidget.prototype.render = function(image) {
      var box, cx, dx, lCx, x, y, _fn, _fn1, _i, _j, _len, _len1, _ref, _ref1,
        _this = this;
      cx = this.canvas.getContext('2d');
      x = this.canvas.width * .5;
      y = this.canvas.height * .5;
      switch (this.transition) {
        case 0:
          cx.globalAlpha = this.curAlpha;
          return cx.drawImage(image, x - image.width * .5, y - image.height * .5);
        case 1:
          cx.globalAlpha = this.curAlpha;
          return cx.drawImage(image, 0, 0, image.width, image.height, x - image.width * this.curAlpha * .5, y - image.height * .5, image.width * this.curAlpha, image.height);
        case 2:
          return cx.drawImage(image, 0, 0, image.width, image.height, x - image.width * .5, y - image.height * .5, image.width * this.curAlpha, image.height);
        case 3:
          cx.globalAlpha = this.curAlpha;
          return cx.drawImage(image, image.width * .5 * (1 - this.curAlpha), image.height * .5 * (1 - this.curAlpha), image.width * this.curAlpha, image.height * this.curAlpha, x - image.width * this.curAlpha * .5, y - image.height * this.curAlpha * .5, image.width * this.curAlpha, image.height * this.curAlpha);
        case 4:
          if (this.recs === void 0) {
            this.B = 64;
            this.recs = [];
            this.recX = this.canvas.width - this.B;
            this.recY = -this.B;
            this.recAddBloco = true;
            this.lastRec = false;
          }
          if (this.recAddBloco) {
            this.recY += this.B;
            if (this.recY > this.canvas.height) {
              if (this.recX < 0) {
                this.recAddBloco = false;
                this.lastRec = this.recs[this.recs.length - 1];
              }
              this.recY = 0;
              this.recX -= this.B;
            }
            this.recs.push({
              x: this.recX,
              y: this.recY,
              z: 0
            });
          }
          _ref = this.recs;
          _fn = function(box) {
            box.z += (1 - box.z) * .13;
            return cx.drawImage(image, box.x + _this.B * .5 - _this.B * .5 * box.z, box.y + _this.B * .5 - _this.B * .5 * box.z, _this.B * box.z, _this.B * box.z, box.x + _this.B * .5 - _this.B * .5 * box.z, box.y + _this.B * .5 - _this.B * .5 * box.z, _this.B * box.z, _this.B * box.z);
          };
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            box = _ref[_i];
            _fn(box);
          }
          this.curAlpha = 0;
          if (this.lastRec) {
            if (Math.round(this.lastRec.z * 1000) >= 1000) {
              this.recs = void 0;
              return this.curAlpha = 1;
            }
          }
          break;
        case 5:
          if (this.recs === void 0) {
            this.B = 64;
            this.ZERO = 0;
            if (this.canvas.width % this.B > 0) {
              this.ZERO = this.canvas.width - (1 + Math.round(this.canvas.width / this.B)) * this.B;
            }
            this.recs = [];
            this.recX = this.canvas.width - this.B;
            this.recY = -this.B;
            this.recAddBloco = true;
            this.lastRec = false;
            if (this.lastImageRendered === void 0) {
              this.lastImageRendered = document.createElement("canvas");
              this.lastImageRendered.width = this.canvas.width;
              this.lastImageRendered.height = this.canvas.height;
            }
            lCx = this.lastImageRendered.getContext('2d');
            lCx.drawImage(this.canvas, 0, 0);
          }
          if (this.recAddBloco) {
            dx = this.recX;
            if (dx < 0) {
              dx = 0;
            }
            this.recs.push({
              x: dx,
              y: this.recY,
              z: 0
            });
            this.recY += this.B;
            if (this.recY > this.canvas.height) {
              this.recY = 0;
              this.recX -= this.B;
              if (this.recX < this.ZERO) {
                this.recAddBloco = false;
                this.lastRec = this.recs[this.recs.length - 1];
              }
            }
          }
          cx.strokeStyle = "#dfd";
          cx.globalAlpha = 1;
          cx.drawImage(this.lastImageRendered, 0, 0);
          cx.lineWidth = 2;
          _ref1 = this.recs;
          _fn1 = function(box) {
            box.z += (1 - box.z) * .13;
            cx.globalAlpha = 1;
            cx.drawImage(image, box.x + _this.B * .5 - _this.B * .5 * box.z, box.y + _this.B * .5 - _this.B * .5 * box.z, _this.B * box.z, _this.B * box.z, box.x + _this.B * .5 - _this.B * .5 * box.z, box.y + _this.B * .5 - _this.B * .5 * box.z, _this.B * box.z, _this.B * box.z);
            cx.globalAlpha = 1 - box.z;
            return cx.strokeRect(box.x + 1, box.y + 1, _this.B - 2, _this.B - 2);
          };
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            box = _ref1[_j];
            _fn1(box);
          }
          this.curAlpha = 0;
          if (this.lastRec) {
            if (Math.round(this.lastRec.z * 1000) >= 1000) {
              this.recs = void 0;
              this.curAlpha = 1;
              cx.globalAlpha = 1;
              return cx.lineWidth = 0;
            }
          }
      }
    };

    CardWidget.prototype.addEvent = function(target, name, func) {
      if (target.attachEvent) {
        return target.attachEvent('on' + name, func);
      } else {
        return target.addEventListener(name, func);
      }
    };

    return CardWidget;

  })();

  if (window.cw_instances === void 0) {
    window.cw_instances = 0;
  }

  window.cw_instances += 1;

  name = "CardWidget_" + window.cw_instances;

  slides_seta_data = "data:image/png;base64,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";

  try {
    if (!slides_seta === void 0) {
      slides_seta_data = slides_seta;
    }
  } catch (err) {

  }

  document.write("<aside id=\"" + name + "\">" + "<style type=\"text/css\" scoped>" + "#" + name + "{\n" + "position:relative;\n" + "}\n" + "</style>" + "<canvas id=\"" + name + "_canvas\">" + "Navegador não compatível com W3C." + "</canvas>" + "<style type=\"text/css\" scoped>" + ".wslider_seta_flip {" + "	-moz-transform: scaleX(-1);" + "	-o-transform: scaleX(-1);" + "	-webkit-transform: scaleX(-1);" + "	transform: scaleX(-1);" + "	filter: FlipH;" + "	-ms-filter: \"FlipH\";" + "}" + "" + ".wslider_seta {" + "	position: absolute;" + "	top: 50%; margin-top: -64px;" + "	width: 128px; height: 128px;" + "	text-decoration: none;" + "	transition: opacity 1s;" + "	-webkit-transition: opacity 1s;" + "	opacity:0.0;" + "	background-image: url(" + slides_seta_data + ");" + "}" + "" + ".wslider_seta:hover {" + "	opacity:1.0;" + "}" + "</style>" + "<a id=\"wslider_seta_r_" + name + "\" class=\"wslider_seta wslider_seta_flip\" style=\"left: 2px;\" href=\"javascript:var w___nothing=0;\">&nbsp;</a>" + "<a id=\"wslider_seta_a_" + name + "\" class=\"wslider_seta\" style=\"right: 2px;\" href=\"javascript:var w___nothing=0;\">&nbsp;</a>" + "</aside>");

  new CardWidget(name, slides, slides_path);

}).call(this);
